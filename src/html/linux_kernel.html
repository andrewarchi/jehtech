<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <!-- HTML 4 -->
	<meta charset="UTF-8">                                              <!-- HTML 5 -->
	<title>Linux Kernel notes</title>
	<!-- META_INSERT -->
	<!-- CSS_INSERT -->
	<!-- JAVASCRIPT_INSERT -->
</head>

<body>
<div id="header">
	-- This is JEHTech --
</div>

<div id="sidebar">
	<h1 class="title">Links...</h1>
	<div id="includedContent"></div>
</div>

<div id="content">
<h1 class="title">Linux Kernel notes</h1>
<div style="padding-right:10px;">

<h2>To Read</h2>
<div>
  <ol>
    <li><a href="https://googleprojectzero.blogspot.co.uk/2016/06/exploiting-recursion-in-linux-kernel_20.html"
         target="_blank">Exploiting Recursion in the Linux Kernel </a>,
    </li>
    <li><a href="http://free-electrons.com/doc/training/linux-kernel/linux-kernel-labs.pdf"
           target="_blank">Linux Kernel and Driver Development Training Lab Book</a>, FreeElectrons.com.
    </li>
    <li>http://irl.cs.ucla.edu/~yingdi/web/paperreading/smp_locking.pdf</li>
    <li>https://www.kernel.org/pub/linux/kernel/people/mochel/doc/papers/ols-2005/mochel.pdf</li>
  </ol>
</div>

<h2>Unbind A Kernel Driver</h2>
<p>
  Most drivers have an entry under <code>/sys/bus/xxx/drivers/yyy</code>. For example if you
  <code>ls</code> the directory <code>/sys/bus</code> you will see somthing similar to the
  following:
</p>
<pre>/sys/bus
|-- acpi
|-- event_source
|-- i2c
|-- mdio_bus
|-- mmc
|-- pci
|-- pci_express
|-- platform
|-- pnp
|-- rapidio
|-- scsi
|-- sdio
|-- serio
|-- spi
|-- usb
&lt;snip&gt;</pre>
<p>
  The different types of busses are listed. Under each bus, the following structure is seen:
</p>
<pre>/sys/bus/XXX
|-- devices
`-- drivers
</pre>
<p>
  We're interested in the <code>drivers</code> subdirectory. Let's take a look at a sample directory
  for I2C drivers:
</p>
<pre>/sys/bus/i2c/drivers
|-- 88PM860x
|-- aat2870
&lt;snip&gt;
|-- wm8350
`-- wm8994</pre>
<p>
  Under the <code>drivers</code> directory we can see (above) a list of devices for which drivers
  exist.
</p>
<h2>Building The Kernel</h2>
<div>
    <pre>Can get kernel version using make kernelversion

   sudo wget www.kernel.org/pub/linux/kernel/v5.x/linux-4.9.4.tar.bz2
   tar xzvf linux-4.9.4.tar.gz 
   cd linux-4.9.4/
   make clean
   sudo apt-get install libncurses5-dev
   make menuconfig # needs curses
or sudo apt-get install libqt4-dev
   make xconfig # needs qt


----


http://newandroidbook.com/Book/Input.html
=========================================

/proc/interupts - To look at interrupt lines claimed by drivers - architecture dependent
/proc/stat      - shows interrupt count

Input driver model docs:
    Documentation/input/, and in particular input.txt

When driver registers as input device, the following is auto created:
  /dev/input/eventX (cat this to get dump of linux input events as they happen)
As well as sysfs entries.

/proc/bus/input/devices - Where system keeps track of all devices

/sys/class/input/eventX - directory - info about device assoc. with this event
    cat /sys/class/input/eventX/uevent to get device info such as major and minor numnber etc

getevent and sendevent command:
    system/core/toolbox/(get|send)event.c.
For example `getevent -l` lists the devices and their human readable names and associated "eventX"

Both tools seem to use the /dev/input/eventXX to read and write events. To write events you need
to have root access to make /dev/input/eventXX writeable!

https://wiki.ubuntu.com/DebuggingTouchpadDetection/evtest
http://stackoverflow.com/questions/16695432/input-event-structure-description-from-linux-input-h
http://www.usb.org/developers/hidpage
https://www.kernel.org/doc/Documentation/input/multi-touch-protocol.txt
https://source.android.com/devices/input/touch-devices.html


   </pre>
</div>

</div>
</body>
</html>
